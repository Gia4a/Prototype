# Firebase App Hosting Configuration
# Configuration for serving static frontend with Express server

runConfig:
  # Environment variables for functions
  env:
    - variable: GEMINI_API_KEY
      value: AIzaSyCXt4Rgduq8OhQzBFW1nXdToL-4gc-OjX8
      availability:
        - RUNTIME
        - BUILD

  # Cloud Run configuration
  cpu: 1
  memoryMiB: 512
  concurrency: 80
  minInstances: 0
  maxInstances: 100

# Firebase App Hosting Configuration for Static Site
runConfig:
  env:
    - variable: GEMINI_API_KEY
      value: AIzaSyCXt4Rgduq8OhQzBFW1nXdToL-4gc-OjX8
      availability:
        - RUNTIME
        - BUILD

  cpu: 1
  memoryMiB: 512
  concurrency: 80
  minInstances: 0
  maxInstances: 100

buildConfig:
  buildCommand: |
    cd frontend && npm ci && npm run build
    npm ci
    cp -r frontend/dist/* .
  startCommand: node server.js
  includedFiles:
    - frontend/dist/**
    - server.js
    - package*.json
    - firebase.json
    - apphosting.yaml